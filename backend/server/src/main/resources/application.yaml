spring:
  datasource:
    url: jdbc:mysql://localhost:3306/medi_check?serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: root
    password: za8954sw # 본인 MySQL 비번으로 수정!
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true

# H2를 찾지 않도록 명시적으로 설정
  h2:
    console:
      enabled: false

# JWT (회원 로그인)
app:
  jwt:
    secret: ${JWT_SECRET:medicheck-jwt-secret-change-in-production-min-256bits}
    expiration-ms: 86400000  # 24h

# 동기화 API 호출 시 필요한 관리자 키 (헤더 X-Admin-Key 와 일치해야 함).
# 로컬: 기본값 사용. 운영: 반드시 환경변수 ADMIN_SYNC_KEY 로 덮어써야 함.
admin:
  sync-key: ${ADMIN_SYNC_KEY:local-dev-key}

# 건강보험심사평가원 병원정보 Open API (공공데이터포털 인증키)
# 로컬: application-local.yaml 에 service-key 넣고 프로필 local 로 실행
# 길찾기 API 호출 제한: IP별(PerIPDirectionsRateLimitFilter) + 서버 전역(Resilience4j)
directions:
  rate-limit:
    per-client-limit-for-period: 30   # IP당 30회/분
    per-client-refresh-period: 1m
    global-limit-for-period: 300      # 서버 전역 300회/분 (안전장치)

resilience4j:
  ratelimiter:
    instances:
      directions:
        limitForPeriod: ${directions.rate-limit.global-limit-for-period:300}
        limitRefreshPeriod: 1m
        timeoutDuration: 0

# 카카오모빌리티 길찾기 API (developers.kakao.com → 앱 → REST API 키)
kakao:
  mobility:
    rest-api-key: ${KAKAO_MOBILITY_REST_API_KEY:}

  # 카카오 OAuth (소셜 로그인)
  oauth:
    # 프론트에서 사용하는 REST API 키 (client_id)
    rest-api-key: ${KAKAO_OAUTH_REST_API_KEY:}
    # 선택: 카카오 앱 클라이언트 시크릿 사용 시 설정
    client-secret: ${KAKAO_OAUTH_CLIENT_SECRET:}

hira:
  api:
    # 공공데이터포털 개발계정 상세보기 기준: v2, getHospBasisList
    base-url: https://apis.data.go.kr/B551182/hospInfoServicev2
    service-key: ${HIRA_SERVICE_KEY:}